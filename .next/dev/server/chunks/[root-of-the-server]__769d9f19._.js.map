{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/luisc/Documents/PROJETOS/crm-sistema/lib/utils/jwt.js"],"sourcesContent":["// lib/utils/jwt.js\nimport jwt from 'jsonwebtoken'\n\nconst JWT_SECRET = process.env.JWT_SECRET || 'seu-secret-super-seguro-aqui'\nconst JWT_EXPIRES_IN = '7d'\n\n// Gerar token JWT\nexport function generateToken(payload) {\n  return jwt.sign(payload, JWT_SECRET, { expiresIn: JWT_EXPIRES_IN })\n}\n\n// Verificar token JWT\nexport function verifyToken(token) {\n  try {\n    return jwt.verify(token, JWT_SECRET)\n  } catch (error) {\n    return null\n  }\n}\n\n// Decodificar token sem verificar (útil para debug)\nexport function decodeToken(token) {\n  try {\n    return jwt.decode(token)\n  } catch (error) {\n    return null\n  }\n}\n\n// Extrair token do header Authorization\nexport function extractToken(authHeader) {\n  if (!authHeader || !authHeader.startsWith('Bearer ')) {\n    return null\n  }\n  return authHeader.substring(7)\n}"],"names":[],"mappings":"AAAA,mBAAmB;;;;;;;;;;;AACnB;;AAEA,MAAM,aAAa,QAAQ,GAAG,CAAC,UAAU,IAAI;AAC7C,MAAM,iBAAiB;AAGhB,SAAS,cAAc,OAAO;IACnC,OAAO,kJAAG,CAAC,IAAI,CAAC,SAAS,YAAY;QAAE,WAAW;IAAe;AACnE;AAGO,SAAS,YAAY,KAAK;IAC/B,IAAI;QACF,OAAO,kJAAG,CAAC,MAAM,CAAC,OAAO;IAC3B,EAAE,OAAO,OAAO;QACd,OAAO;IACT;AACF;AAGO,SAAS,YAAY,KAAK;IAC/B,IAAI;QACF,OAAO,kJAAG,CAAC,MAAM,CAAC;IACpB,EAAE,OAAO,OAAO;QACd,OAAO;IACT;AACF;AAGO,SAAS,aAAa,UAAU;IACrC,IAAI,CAAC,cAAc,CAAC,WAAW,UAAU,CAAC,YAAY;QACpD,OAAO;IACT;IACA,OAAO,WAAW,SAAS,CAAC;AAC9B","debugId":null}},
    {"offset": {"line": 114, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/luisc/Documents/PROJETOS/crm-sistema/lib/firebase/admin.js"],"sourcesContent":["// lib/firebase/admin.js\nimport admin from 'firebase-admin'\n\n// Inicializar Firebase Admin apenas uma vez\nif (!admin.apps.length) {\n  try {\n    admin.initializeApp({\n      credential: admin.credential.cert({\n        projectId: process.env.FIREBASE_PROJECT_ID,\n        clientEmail: process.env.FIREBASE_CLIENT_EMAIL,\n        privateKey: process.env.FIREBASE_PRIVATE_KEY?.replace(/\\\\n/g, '\\n'),\n      }),\n      databaseURL: process.env.FIREBASE_DATABASE_URL,\n    })\n    console.log('✅ Firebase Admin inicializado')\n  } catch (error) {\n    console.error('❌ Erro ao inicializar Firebase Admin:', error)\n  }\n}\n\n// Exportar instâncias\nexport const db = admin.firestore()\nexport const auth = admin.auth()\nexport const storage = admin.storage()\n\n// Helper functions para Firestore\nexport const collections = {\n  users: () => db.collection('users'),\n  clientes: () => db.collection('clientes'),\n  leads: () => db.collection('leads'),\n  vendas: () => db.collection('vendas'),\n  atividades: () => db.collection('atividades'),\n}\n\n// Função para converter Timestamp do Firestore\nexport const convertTimestamp = (timestamp) => {\n  if (!timestamp) return null\n  return timestamp.toDate ? timestamp.toDate().toISOString() : timestamp\n}\n\n// Função para formatar documento do Firestore\nexport const formatDoc = (doc) => {\n  if (!doc.exists) return null\n  const data = doc.data()\n  return {\n    id: doc.id,\n    ...data,\n    criadoEm: convertTimestamp(data.criadoEm),\n    atualizadoEm: convertTimestamp(data.atualizadoEm),\n  }\n}\n\nexport default admin"],"names":[],"mappings":"AAAA,wBAAwB;;;;;;;;;;;;;;;;;AACxB;;AAEA,4CAA4C;AAC5C,IAAI,CAAC,sIAAK,CAAC,IAAI,CAAC,MAAM,EAAE;IACtB,IAAI;QACF,sIAAK,CAAC,aAAa,CAAC;YAClB,YAAY,sIAAK,CAAC,UAAU,CAAC,IAAI,CAAC;gBAChC,WAAW,QAAQ,GAAG,CAAC,mBAAmB;gBAC1C,aAAa,QAAQ,GAAG,CAAC,qBAAqB;gBAC9C,YAAY,QAAQ,GAAG,CAAC,oBAAoB,EAAE,QAAQ,QAAQ;YAChE;YACA,aAAa,QAAQ,GAAG,CAAC,qBAAqB;QAChD;QACA,QAAQ,GAAG,CAAC;IACd,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yCAAyC;IACzD;AACF;AAGO,MAAM,KAAK,sIAAK,CAAC,SAAS;AAC1B,MAAM,OAAO,sIAAK,CAAC,IAAI;AACvB,MAAM,UAAU,sIAAK,CAAC,OAAO;AAG7B,MAAM,cAAc;IACzB,OAAO,IAAM,GAAG,UAAU,CAAC;IAC3B,UAAU,IAAM,GAAG,UAAU,CAAC;IAC9B,OAAO,IAAM,GAAG,UAAU,CAAC;IAC3B,QAAQ,IAAM,GAAG,UAAU,CAAC;IAC5B,YAAY,IAAM,GAAG,UAAU,CAAC;AAClC;AAGO,MAAM,mBAAmB,CAAC;IAC/B,IAAI,CAAC,WAAW,OAAO;IACvB,OAAO,UAAU,MAAM,GAAG,UAAU,MAAM,GAAG,WAAW,KAAK;AAC/D;AAGO,MAAM,YAAY,CAAC;IACxB,IAAI,CAAC,IAAI,MAAM,EAAE,OAAO;IACxB,MAAM,OAAO,IAAI,IAAI;IACrB,OAAO;QACL,IAAI,IAAI,EAAE;QACV,GAAG,IAAI;QACP,UAAU,iBAAiB,KAAK,QAAQ;QACxC,cAAc,iBAAiB,KAAK,YAAY;IAClD;AACF;uCAEe,sIAAK","debugId":null}},
    {"offset": {"line": 178, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/luisc/Documents/PROJETOS/crm-sistema/lib/middleware/auth.js"],"sourcesContent":["// lib/middleware/auth.js\nimport { NextResponse } from 'next/server'\nimport { verifyToken, extractToken } from '@/lib/utils/jwt'\nimport { collections } from '@/lib/firebase/admin'\n\n// Middleware para verificar autenticação\nexport async function authenticate(request) {\n  try {\n    // Extrair token do header\n    const authHeader = request.headers.get('authorization')\n    const token = extractToken(authHeader)\n\n    if (!token) {\n      return {\n        error: 'Token não fornecido',\n        status: 401\n      }\n    }\n\n    // Verificar token\n    const decoded = verifyToken(token)\n    if (!decoded) {\n      return {\n        error: 'Token inválido ou expirado',\n        status: 401\n      }\n    }\n\n    // Buscar usuário no banco\n    const userDoc = await collections.users().doc(decoded.userId).get()\n    \n    if (!userDoc.exists) {\n      return {\n        error: 'Usuário não encontrado',\n        status: 404\n      }\n    }\n\n    // Retornar dados do usuário\n    return {\n      user: {\n        id: userDoc.id,\n        ...userDoc.data()\n      }\n    }\n  } catch (error) {\n    console.error('Erro na autenticação:', error)\n    return {\n      error: 'Erro ao verificar autenticação',\n      status: 500\n    }\n  }\n}\n\n// Helper para criar resposta de erro\nexport function unauthorizedResponse(message = 'Não autorizado') {\n  return NextResponse.json(\n    { error: message },\n    { status: 401 }\n  )\n}\n\n// Helper para criar resposta de sucesso\nexport function successResponse(data, status = 200) {\n  return NextResponse.json(data, { status })\n}\n\n// Helper para criar resposta de erro\nexport function errorResponse(message, status = 500) {\n  return NextResponse.json(\n    { error: message },\n    { status }\n  )\n}"],"names":[],"mappings":"AAAA,yBAAyB;;;;;;;;;;;AACzB;AACA;AACA;;;;AAGO,eAAe,aAAa,OAAO;IACxC,IAAI;QACF,0BAA0B;QAC1B,MAAM,aAAa,QAAQ,OAAO,CAAC,GAAG,CAAC;QACvC,MAAM,QAAQ,IAAA,qIAAY,EAAC;QAE3B,IAAI,CAAC,OAAO;YACV,OAAO;gBACL,OAAO;gBACP,QAAQ;YACV;QACF;QAEA,kBAAkB;QAClB,MAAM,UAAU,IAAA,oIAAW,EAAC;QAC5B,IAAI,CAAC,SAAS;YACZ,OAAO;gBACL,OAAO;gBACP,QAAQ;YACV;QACF;QAEA,0BAA0B;QAC1B,MAAM,UAAU,MAAM,yIAAW,CAAC,KAAK,GAAG,GAAG,CAAC,QAAQ,MAAM,EAAE,GAAG;QAEjE,IAAI,CAAC,QAAQ,MAAM,EAAE;YACnB,OAAO;gBACL,OAAO;gBACP,QAAQ;YACV;QACF;QAEA,4BAA4B;QAC5B,OAAO;YACL,MAAM;gBACJ,IAAI,QAAQ,EAAE;gBACd,GAAG,QAAQ,IAAI,EAAE;YACnB;QACF;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yBAAyB;QACvC,OAAO;YACL,OAAO;YACP,QAAQ;QACV;IACF;AACF;AAGO,SAAS,qBAAqB,UAAU,gBAAgB;IAC7D,OAAO,gJAAY,CAAC,IAAI,CACtB;QAAE,OAAO;IAAQ,GACjB;QAAE,QAAQ;IAAI;AAElB;AAGO,SAAS,gBAAgB,IAAI,EAAE,SAAS,GAAG;IAChD,OAAO,gJAAY,CAAC,IAAI,CAAC,MAAM;QAAE;IAAO;AAC1C;AAGO,SAAS,cAAc,OAAO,EAAE,SAAS,GAAG;IACjD,OAAO,gJAAY,CAAC,IAAI,CACtB;QAAE,OAAO;IAAQ,GACjB;QAAE;IAAO;AAEb","debugId":null}},
    {"offset": {"line": 260, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/luisc/Documents/PROJETOS/crm-sistema/app/api/auth/me/route.js"],"sourcesContent":["// app/api/auth/me/route.js\nimport { NextResponse } from 'next/server'\nimport { authenticate } from '@/lib/middleware/auth'\n\nexport async function GET(request) {\n  try {\n    // Verificar autenticação\n    const authResult = await authenticate(request)\n    \n    if (authResult.error) {\n      return NextResponse.json(\n        { error: authResult.error },\n        { status: authResult.status }\n      )\n    }\n\n    const { user } = authResult\n\n    // Remover senha antes de retornar\n    const { password, ...userWithoutPassword } = user\n\n    return NextResponse.json({\n      success: true,\n      user: userWithoutPassword\n    })\n\n  } catch (error) {\n    console.error('Erro ao buscar usuário:', error)\n    return NextResponse.json(\n      { error: 'Erro ao buscar dados do usuário' },\n      { status: 500 }\n    )\n  }\n}"],"names":[],"mappings":"AAAA,2BAA2B;;;;;AAC3B;AACA;;;AAEO,eAAe,IAAI,OAAO;IAC/B,IAAI;QACF,yBAAyB;QACzB,MAAM,aAAa,MAAM,IAAA,2IAAY,EAAC;QAEtC,IAAI,WAAW,KAAK,EAAE;YACpB,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO,WAAW,KAAK;YAAC,GAC1B;gBAAE,QAAQ,WAAW,MAAM;YAAC;QAEhC;QAEA,MAAM,EAAE,IAAI,EAAE,GAAG;QAEjB,kCAAkC;QAClC,MAAM,EAAE,QAAQ,EAAE,GAAG,qBAAqB,GAAG;QAE7C,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,MAAM;QACR;IAEF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2BAA2B;QACzC,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAkC,GAC3C;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}