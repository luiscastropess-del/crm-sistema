"use strict";(()=>{var o={};o.id=6752,o.ids=[6752],o.modules={399:o=>{o.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:o=>{o.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1325:(o,e,t)=>{t.r(e),t.d(e,{originalPathname:()=>N,patchFetch:()=>O,requestAsyncStorage:()=>l,routeModule:()=>d,serverHooks:()=>p,staticGenerationAsyncStorage:()=>f});var r={};t.r(r),t.d(r,{DELETE:()=>u,PATCH:()=>c});var a=t(9303),i=t(8716),n=t(670),s=t(7070);async function c(o,{params:e}){try{let t=await Object(function(){var o=Error("Cannot find module '@/lib/auth'");throw o.code="MODULE_NOT_FOUND",o}())(o);if(!t)return s.NextResponse.json({erro:"N\xe3o autorizado"},{status:401});let{id:r}=e,a=await o.json(),i=await Object(function(){var o=Error("Cannot find module '@/lib/firebase-admin'");throw o.code="MODULE_NOT_FOUND",o}()).collection("notificacoes").doc(r).get();if(!i.exists)return s.NextResponse.json({erro:"Notifica\xe7\xe3o n\xe3o encontrada"},{status:404});if(i.data().userId!==t.uid)return s.NextResponse.json({erro:"N\xe3o autorizado"},{status:403});return await Object(function(){var o=Error("Cannot find module '@/lib/firebase-admin'");throw o.code="MODULE_NOT_FOUND",o}()).collection("notificacoes").doc(r).update({lida:void 0===a.lida||a.lida,lidaEm:new Date}),s.NextResponse.json({sucesso:!0,mensagem:"Notifica\xe7\xe3o atualizada com sucesso"})}catch(o){return console.error("Erro ao atualizar notifica\xe7\xe3o:",o),s.NextResponse.json({erro:"Erro ao atualizar notifica\xe7\xe3o"},{status:500})}}async function u(o,{params:e}){try{let t=await Object(function(){var o=Error("Cannot find module '@/lib/auth'");throw o.code="MODULE_NOT_FOUND",o}())(o);if(!t)return s.NextResponse.json({erro:"N\xe3o autorizado"},{status:401});let{id:r}=e,a=await Object(function(){var o=Error("Cannot find module '@/lib/firebase-admin'");throw o.code="MODULE_NOT_FOUND",o}()).collection("notificacoes").doc(r).get();if(!a.exists)return s.NextResponse.json({erro:"Notifica\xe7\xe3o n\xe3o encontrada"},{status:404});if(a.data().userId!==t.uid)return s.NextResponse.json({erro:"N\xe3o autorizado"},{status:403});return await Object(function(){var o=Error("Cannot find module '@/lib/firebase-admin'");throw o.code="MODULE_NOT_FOUND",o}()).collection("notificacoes").doc(r).delete(),s.NextResponse.json({sucesso:!0,mensagem:"Notifica\xe7\xe3o exclu\xedda com sucesso"})}catch(o){return console.error("Erro ao excluir notifica\xe7\xe3o:",o),s.NextResponse.json({erro:"Erro ao excluir notifica\xe7\xe3o"},{status:500})}}(function(){var o=Error("Cannot find module '@/lib/auth'");throw o.code="MODULE_NOT_FOUND",o})(),function(){var o=Error("Cannot find module '@/lib/firebase-admin'");throw o.code="MODULE_NOT_FOUND",o}();let d=new a.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/notificacoes/id/route",pathname:"/api/notificacoes/id",filename:"route",bundlePath:"app/api/notificacoes/id/route"},resolvedPagePath:"C:\\Users\\luisc\\Documents\\PROJETOS\\crm-sistema\\app\\api\\notificacoes\\id\\route.js",nextConfigOutput:"",userland:r}),{requestAsyncStorage:l,staticGenerationAsyncStorage:f,serverHooks:p}=d,N="/api/notificacoes/id/route";function O(){return(0,n.patchFetch)({serverHooks:p,staticGenerationAsyncStorage:f})}}};var e=require("../../../../webpack-runtime.js");e.C(o);var t=o=>e(e.s=o),r=e.X(0,[9276,5972],()=>t(1325));module.exports=r})();