(()=>{var e={};e.id=9501,e.ids=[9501],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5298:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>o.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>h,tree:()=>d}),s(9991),s(3477),s(7764),s(5866);var a=s(3191),r=s(8716),i=s(7922),o=s.n(i),n=s(5231),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);s.d(t,l);let d=["",{children:["dashboard",{children:["notificacoes",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,9991)),"C:\\Users\\luisc\\Documents\\PROJETOS\\crm-sistema\\app\\dashboard\\notificacoes\\page.js"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,3477)),"C:\\Users\\luisc\\Documents\\PROJETOS\\crm-sistema\\app\\dashboard\\layout.js"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,7764)),"C:\\Users\\luisc\\Documents\\PROJETOS\\crm-sistema\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\luisc\\Documents\\PROJETOS\\crm-sistema\\app\\dashboard\\notificacoes\\page.js"],m="/dashboard/notificacoes/page",x={require:s,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/notificacoes/page",pathname:"/dashboard/notificacoes",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},5016:(e,t,s)=>{Promise.resolve().then(s.bind(s,685))},241:(e,t,s)=>{Promise.resolve().then(s.bind(s,7473))},5453:()=>{},3603:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},685:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var a=s(326),r=s(7577);function i({children:e}){let[t,s]=(0,r.useState)(!0);return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[a.jsx(Object(function(){var e=Error("Cannot find module '@/components/layout/Sidebar'");throw e.code="MODULE_NOT_FOUND",e}()),{isOpen:t,setIsOpen:s}),(0,a.jsxs)("div",{className:`transition-all duration-300 ${t?"ml-64":"ml-20"}`,children:[a.jsx(Object(function(){var e=Error("Cannot find module '@/components/layout/Header'");throw e.code="MODULE_NOT_FOUND",e}()),{toggleSidebar:()=>s(!t)}),a.jsx("main",{className:"p-6",children:e})]})]})}(function(){var e=Error("Cannot find module '@/components/layout/Sidebar'");throw e.code="MODULE_NOT_FOUND",e})(),function(){var e=Error("Cannot find module '@/components/layout/Header'");throw e.code="MODULE_NOT_FOUND",e}()},7473:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var a=s(326),r=s(7577),i=s(5047),o=s(434);function n(){let e=(0,i.useRouter)(),[t,s]=(0,r.useState)([]),[n,l]=(0,r.useState)("todas"),[d,c]=(0,r.useState)(!0),[m,x]=(0,r.useState)(0),h=async()=>{try{let t=localStorage.getItem("token");if(!t){e.push("/login");return}let a="todas"===n?"/api/notificacoes":`/api/notificacoes?lida=${"lidas"===n?"true":"false"}`,r=await fetch(a,{headers:{Authorization:`Bearer ${t}`}}),i=await r.json();i.sucesso&&(s(i.notificacoes),x(i.naoLidas))}catch(e){console.error("Erro ao carregar notifica\xe7\xf5es:",e)}finally{c(!1)}},g=async e=>{try{let t=localStorage.getItem("token");await fetch(`/api/notificacoes/${e}`,{method:"PATCH",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({lida:!0})}),h()}catch(e){console.error("Erro ao marcar notifica\xe7\xe3o como lida:",e)}},u=async()=>{try{let e=localStorage.getItem("token"),t=await fetch("/api/notificacoes",{method:"PATCH",headers:{Authorization:`Bearer ${e}`}});(await t.json()).sucesso&&h()}catch(e){console.error("Erro ao marcar todas como lidas:",e)}},p=async e=>{if(confirm("Deseja realmente excluir esta notifica\xe7\xe3o?"))try{let t=localStorage.getItem("token");await fetch(`/api/notificacoes/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}}),h()}catch(e){console.error("Erro ao excluir notifica\xe7\xe3o:",e)}},b=e=>({info:"ℹ️",sucesso:"✅",aviso:"⚠️",erro:"❌",tarefa:"\uD83D\uDCCB",venda:"\uD83D\uDCB0",cliente:"\uD83D\uDC64",lead:"\uD83C\uDFAF",lembrete:"⏰"})[e]||"\uD83D\uDD14",f=e=>({info:"bg-blue-100 text-blue-700 border-blue-200",sucesso:"bg-green-100 text-green-700 border-green-200",aviso:"bg-yellow-100 text-yellow-700 border-yellow-200",erro:"bg-red-100 text-red-700 border-red-200",tarefa:"bg-purple-100 text-purple-700 border-purple-200",venda:"bg-emerald-100 text-emerald-700 border-emerald-200",cliente:"bg-indigo-100 text-indigo-700 border-indigo-200",lead:"bg-orange-100 text-orange-700 border-orange-200",lembrete:"bg-pink-100 text-pink-700 border-pink-200"})[e]||"bg-gray-100 text-gray-700 border-gray-200",j=e=>{let t=new Date(e),s=Math.floor((new Date-t)/6e4),a=Math.floor(s/60),r=Math.floor(a/24);return s<1?"Agora mesmo":s<60?`H\xe1 ${s} min`:a<24?`H\xe1 ${a}h`:r<7?`H\xe1 ${r}d`:t.toLocaleDateString("pt-BR",{day:"2-digit",month:"short"})},N=(e=>{let t={Hoje:[],Ontem:[],"Esta Semana":[],"Mais Antigas":[]},s=new Date,a=new Date(s);a.setDate(a.getDate()-1);let r=new Date(s);return r.setDate(r.getDate()-7),e.forEach(e=>{let i=new Date(e.criadoEm);i.toDateString()===s.toDateString()?t.Hoje.push(e):i.toDateString()===a.toDateString()?t.Ontem.push(e):i>=r?t["Esta Semana"].push(e):t["Mais Antigas"].push(e)}),Object.keys(t).forEach(e=>{0===t[e].length&&delete t[e]}),t})(t);return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-10",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx(o.default,{href:"/dashboard",className:"text-gray-600 hover:text-gray-900",children:"← Voltar"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"\uD83D\uDD14 Notifica\xe7\xf5es"}),m>0&&a.jsx("span",{className:"bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:m})]})]}),a.jsx("div",{className:"flex items-center gap-2",children:m>0&&a.jsx("button",{onClick:u,className:"px-4 py-2 text-sm bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"✓ Marcar todas como lidas"})})]})})}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:()=>l("todas"),className:`px-4 py-2 rounded-lg transition-colors ${"todas"===n?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Todas (",t.length,")"]}),(0,a.jsxs)("button",{onClick:()=>l("nao-lidas"),className:`px-4 py-2 rounded-lg transition-colors ${"nao-lidas"===n?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["N\xe3o Lidas (",m,")"]}),a.jsx("button",{onClick:()=>l("lidas"),className:`px-4 py-2 rounded-lg transition-colors ${"lidas"===n?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Lidas"})]})}),d?a.jsx("div",{className:"flex items-center justify-center py-12",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Carregando notifica\xe7\xf5es..."})]})}):0===t.length?(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[a.jsx("div",{className:"text-6xl mb-4",children:"\uD83D\uDD14"}),a.jsx("p",{className:"text-xl text-gray-500 mb-2",children:"nao-lidas"===n?"Voc\xea est\xe1 em dia!":"Nenhuma notifica\xe7\xe3o encontrada"}),a.jsx("p",{className:"text-gray-400",children:"nao-lidas"===n?"N\xe3o h\xe1 notifica\xe7\xf5es n\xe3o lidas no momento":"As notifica\xe7\xf5es aparecer\xe3o aqui"})]}):a.jsx("div",{className:"space-y-6",children:Object.entries(N).map(([e,t])=>(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[a.jsx("h2",{className:"text-lg font-bold text-gray-900",children:e}),a.jsx("div",{className:"flex-1 h-px bg-gray-200"}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:[t.length," notifica\xe7\xe3o",t.length>1?"\xf5es":""]})]}),a.jsx("div",{className:"space-y-3",children:t.map(e=>a.jsx("div",{className:`bg-white rounded-lg shadow hover:shadow-md transition-all ${e.lida?"":"border-l-4 border-indigo-500"}`,children:a.jsx("div",{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:`flex-shrink-0 w-12 h-12 rounded-full flex items-center justify-center text-2xl border-2 ${f(e.tipo)}`,children:b(e.tipo)}),a.jsx("div",{className:"flex-1 min-w-0",children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("h3",{className:"text-base font-semibold text-gray-900",children:e.titulo}),!e.lida&&a.jsx("span",{className:"flex-shrink-0 w-2 h-2 bg-indigo-500 rounded-full"})]}),a.jsx("p",{className:"text-gray-600 text-sm",children:e.mensagem}),e.link&&a.jsx(o.default,{href:e.link,onClick:()=>!e.lida&&g(e.id),className:"inline-block mt-2 text-sm text-indigo-600 hover:text-indigo-700 font-medium",children:"Ver detalhes →"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx("span",{className:"text-xs text-gray-500",children:j(e.criadoEm)}),a.jsx("span",{className:"text-gray-300",children:"•"}),a.jsx("span",{className:"text-xs text-gray-500 capitalize",children:e.tipo})]})]}),(0,a.jsxs)("div",{className:"flex-shrink-0 flex items-center gap-2",children:[!e.lida&&a.jsx("button",{onClick:()=>g(e.id),className:"p-2 text-gray-400 hover:text-indigo-600 transition-colors",title:"Marcar como lida",children:"✓"}),a.jsx("button",{onClick:()=>p(e.id),className:"p-2 text-gray-400 hover:text-red-600 transition-colors",title:"Excluir",children:"\uD83D\uDDD1️"})]})]})})]})})},e.id))})]},e))}),t.length>0&&(0,a.jsxs)("div",{className:"mt-8 bg-white rounded-lg shadow p-6",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"\uD83D\uDCCA Estat\xedsticas"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.length}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Total"})]}),(0,a.jsxs)("div",{className:"text-center p-4 bg-indigo-50 rounded-lg",children:[a.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:m}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"N\xe3o Lidas"})]}),(0,a.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[a.jsx("p",{className:"text-2xl font-bold text-green-600",children:t.filter(e=>e.lida).length}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Lidas"})]}),(0,a.jsxs)("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[a.jsx("p",{className:"text-2xl font-bold text-blue-600",children:N.Hoje?.length||0}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Hoje"})]})]})]}),(0,a.jsxs)("div",{className:"mt-8 bg-white rounded-lg shadow p-6",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"\uD83C\uDFA8 Tipos de Notifica\xe7\xe3o"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3",children:[{tipo:"info",label:"Informa\xe7\xe3o"},{tipo:"sucesso",label:"Sucesso"},{tipo:"aviso",label:"Aviso"},{tipo:"erro",label:"Erro"},{tipo:"tarefa",label:"Tarefa"},{tipo:"venda",label:"Venda"},{tipo:"cliente",label:"Cliente"},{tipo:"lead",label:"Lead"},{tipo:"lembrete",label:"Lembrete"}].map(({tipo:e,label:t})=>(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-lg border-2 ${f(e)}`,children:b(e)}),a.jsx("span",{className:"text-sm text-gray-700",children:t})]},e))})]})]})]})}},5047:(e,t,s)=>{"use strict";var a=s(7389);s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},3477:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(8570).createProxy)(String.raw`C:\Users\luisc\Documents\PROJETOS\crm-sistema\app\dashboard\layout.js#default`)},9991:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(8570).createProxy)(String.raw`C:\Users\luisc\Documents\PROJETOS\crm-sistema\app\dashboard\notificacoes\page.js#default`)},7764:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i,metadata:()=>r});var a=s(9510);s(7272);let r={title:"CRM Sistema",description:"Sistema de CRM completo com Next.js e Firebase"};function i({children:e}){return a.jsx("html",{lang:"pt-BR",suppressHydrationWarning:!0,children:a.jsx("body",{className:"bg-gray-50 antialiased",suppressHydrationWarning:!0,children:e})})}},7272:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[9276,4471,434],()=>s(5298));module.exports=a})();